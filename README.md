# 비즈니스 요구사항과 설계

## 회원
- (1) 회원은 가입하고 조회할 수 있다
- (2) 회원은 `일반`과 `VIP`로 나뉜다
- (3) 회원 데이터는 자체 DB를 구축할 수도 있고 외부 시스템과 연동할 수도 있다(미확정)

## 주문과 할인정책
- (1) 회원은 상품을 주문한다
- (2) 회원 등급에 따라 할인 정책을 적용한다
- (3) 모든 VIP는 1000원을 할인해주는 고정 금액 할인 정책을 갖는다
- (4) 할인 정책은 변경 가능성이 높다. 회사 기본 할인 정책은 변경될 수 있고, 오픈 직전까지 결정되지 않는다. 최악의 경우 적용하지 않을 수도 있다

## 요구사항 분석
- (1) 미결정된 부분을 `인터페이스`로 구현한다
- (2) 구현체는 언제든 갈아낄수 있도록 준비한다


# 회원 도메인 설계

![1](https://github.com/ngngs/OrderWithDiscount/assets/47618270/a61a1858-c6b0-4a69-bba0-da2dcce8e62a)
![2](https://github.com/ngngs/OrderWithDiscount/assets/47618270/25b87411-93b3-40e8-8a9a-0064311db53a)


## 회원 도메인 설계의 문제점
- (1) 다른 저장소로 변경할 때 OCP 원칙을 준수하는가?
- (2) DIP를 지키고 있는가?
- (3) 의존관계가 인터페이스 뿐만 아니라 구현까지 모두 의존하는 문제점이 있음 (new ~() 인터페이스 및 구현체 둘 다에 의존)

# 주문 도메인 설계
![2](https://github.com/ngngs/OrderWithDiscount/assets/47618270/ec835c13-cb0b-4623-a854-454a6d08b4b5)

- (1) 주문 생성: 클라이언트는 주문 서비스에 주문 생성을 요청한다.
- (2) 회원 조회: 할인을 위해서는 회원 등급이 필요하다. 그래서 주문 서비스는 회원 저장소에서 회원을 조회한다.
- (3) 할인 적용: 주문 서비스는 회원 등급에 따른 할인 여부를 할인 정책에 위임한다.
- (4) 주문 결과 반환: 주문 서비스는 할인 결과를 포함한 주문 결과를 반환

## 주문 도메인 클래스 다이어그램
![3](https://github.com/ngngs/OrderWithDiscount/assets/47618270/0e7e9510-e1bb-442b-be63-a9608eea6812)


# 새로운 할인 정책 개발
- 객체지향 설계 원칙을 준수했다면 이런 변화에도 쉽게 적용할 수 있어야한다
![1](https://github.com/ngngs/OrderWithDiscount/assets/47618270/74469d71-c559-4aa2-98a9-4807a36e3bab)

